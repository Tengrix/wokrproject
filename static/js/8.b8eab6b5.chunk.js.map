{"version":3,"sources":["components/common/FormController/FormControl.module.css","components/common/FormController/FormController.tsx","components/utils/validators/validator.ts","components/Login/LoginForm.tsx"],"names":["module","exports","TextArea","input","meta","props","TextAreaError","touched","error","className","s","formControl","InputArea","requiredField","value","maxLengthCreator","maxLength","length","LoginForm","React","memo","handleSubmit","captcha","useSelector","state","auth","action","onSubmit","component","name","type","placeholder","validate","formSummaryError","src","alt","LoginReduxForm","reduxForm","form","Login","isAuth","data","dispatch","useDispatch","to","formData","AuthLogin","login","password","rememberMe"],"mappings":"+FACAA,EAAOC,QAAU,CAAC,YAAc,iCAAiC,MAAQ,2BAA2B,iBAAmB,wC,yJCC1GC,EAAW,SAAC,GAAiC,IAAhCC,EAA+B,EAA/BA,MAAOC,EAAwB,EAAxBA,KAASC,EAAe,gCAC/CC,EAAgBF,EAAKG,SAAWH,EAAKI,MAC3C,OACI,sBAAKC,UAAWC,IAAEC,YAAc,IAAML,EAAeI,IAAEF,MAAM,IAA7D,UACI,8BACI,oDAAcL,GAAUE,MAE3BC,GAAiB,qCAAQF,EAAKI,MAAb,WAIjBI,EAAY,SAAC,GAAiC,IAAhCT,EAA+B,EAA/BA,MAAOC,EAAwB,EAAxBA,KAASC,EAAe,gCAChDC,EAAgBF,EAAKG,SAAWH,EAAKI,MAC3C,OACI,sBAAKC,UAAWC,IAAEC,YAAc,IAAML,EAAeI,IAAEF,MAAM,IAA7D,UACI,iDAAWL,GAAWE,IACrBC,GAAiB,uBAAMG,UAAWC,IAAEF,MAAnB,cAA4BJ,EAAKI,MAAjC,Y,iCCjB9B,oEAAO,IAAMK,EAAgB,SAACC,GAC1B,IAAGA,EACH,MAAO,qBAGEC,EAAmB,SAACC,GAAD,OAAsB,SAACF,GACnD,GAAGA,EAAMG,OAASD,EAAW,MAAM,iBAAN,OAAwBA,EAAxB,e,iCCPjC,+JAkBIA,EAAYD,YAAiB,IAE3BG,EAAuDC,IAAMC,MAAM,YAA4B,IAA1BC,EAAyB,EAAzBA,aAAcb,EAAW,EAAXA,MACjFc,EAAUC,aAAkC,SAAAC,GAAK,OAAIA,EAAMC,KAAKH,WACpE,OACI,uBAAMI,OAAO,GAAGC,SAAUN,EAA1B,UACI,8BACI,cAAC,IAAD,CAAOO,UAAWhB,IAAWiB,KAAM,QAASC,KAAK,OAAOC,YAAa,QAC9DC,SAAU,CAACnB,IAAeG,OAGrC,8BACI,cAAC,IAAD,CAAOY,UAAWhB,IAAWiB,KAAM,WAAYC,KAAK,WAAWC,YAAa,WACrEC,SAAU,CAACnB,IAAeG,OAGrC,8BACI,cAAC,IAAD,CAAOY,UAAW,QAASC,KAAM,aAAcC,KAAK,WAAWC,YAAa,iBAEhF,gCACKvB,EAAQ,qBAAKC,UAAWC,IAAEuB,iBAAlB,SACJzB,IACI,GACT,gCACKc,GAAW,qBAAKY,IAAKZ,EAASa,IAAI,KAClCb,GAAW,cAAC,IAAD,CAAOM,UAAWhB,IAAWiB,KAAM,UAAWC,KAAK,UAAUC,YAAa,eAE1F,oDAOHK,EAAiBC,YAAwB,CAACC,KAAM,SAA/BD,CAAyCnB,GAEjEqB,EAAQpB,IAAMC,MAAK,WACrB,IAAMoB,EAASjB,aAAkC,SAAAC,GAAK,OAAIA,EAAMC,KAAKgB,KAAKD,UACpEE,EAAWC,cAIjB,OAAIH,EACO,cAAC,IAAD,CAAUI,GAAI,aAGrB,gCACI,yCACA,cAACR,EAAD,CAAgBT,SATP,SAACkB,GACdH,EAASI,YAAUD,EAASE,MAAOF,EAASG,SAAUH,EAASI,WAAWJ,EAASvB,mBAe5EiB","file":"static/js/8.b8eab6b5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormControl_formControl__3bI51\",\"error\":\"FormControl_error__2p-ba\",\"formSummaryError\":\"FormControl_formSummaryError__2aYFp\"};","import React from 'react'\r\nimport s from './FormControl.module.css'\r\nexport const TextArea = ({input, meta, ...props}:any) => {\r\n    const TextAreaError = meta.touched && meta.error\r\n    return(\r\n        <div className={s.formControl + '' + (TextAreaError? s.error:'')}>\r\n            <div >\r\n                <textarea {...input}{...props} />\r\n            </div>\r\n            {TextAreaError && <span> {meta.error} </span>}\r\n        </div>\r\n    )\r\n}\r\nexport const InputArea = ({input, meta, ...props}:any) => {\r\n    const TextAreaError = meta.touched && meta.error\r\n    return(\r\n        <div className={s.formControl + '' + (TextAreaError? s.error:'')}>\r\n            <input {...input} {...props}/>\r\n            {TextAreaError && <span className={s.error}> {meta.error} </span>}\r\n        </div>\r\n    )\r\n}","\r\nexport const requiredField = (value:any) => {\r\n    if(value) return undefined\r\n    return 'Field is required'\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength:number) => (value:any) => {\r\n    if(value.length > maxLength) return `Max length is ${maxLength} symbols`\r\n}\r\n","import React from 'react'\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {InputArea} from \"../common/FormController/FormController\";\r\nimport {maxLengthCreator, requiredField} from \"../utils/validators/validator\";\r\nimport {connect, useDispatch, useSelector} from \"react-redux\";\r\nimport {AuthLogin, AuthLogOut, Captcha} from \"../../redux/auth-reducer\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\nimport s from './../common/FormController/FormControl.module.css'\r\n\r\n\r\nexport type FormDataType = {\r\n    login: string;\r\n    password: string;\r\n    rememberMe: boolean;\r\n    captcha:string\r\n}\r\n\r\nlet maxLength = maxLengthCreator(30)\r\n\r\nconst LoginForm: React.FC<InjectedFormProps<FormDataType>> = React.memo( ({handleSubmit, error}) => {\r\n    let captcha = useSelector<AppStateType, string>(state => state.auth.captcha)\r\n    return (\r\n        <form action=\"\" onSubmit={handleSubmit}>\r\n            <div>\r\n                <Field component={InputArea} name={'login'} type=\"text\" placeholder={'login'}\r\n                       validate={[requiredField, maxLength]}\r\n                />\r\n            </div>\r\n            <div>\r\n                <Field component={InputArea} name={'password'} type=\"password\" placeholder={'password'}\r\n                       validate={[requiredField, maxLength]}\r\n                />\r\n            </div>\r\n            <div>\r\n                <Field component={'input'} name={'rememberMe'} type=\"checkbox\" placeholder={'rememberMe'}/>\r\n            </div>\r\n            <div>\r\n                {error ? <div className={s.formSummaryError}>\r\n                    {error}\r\n                </div> : ''}\r\n                <div>\r\n                    {captcha && <img src={captcha} alt=\"\"/>}\r\n                    {captcha && <Field component={InputArea} name={'captcha'} type='captcha' placeholder={'captcha'}/>}\r\n                </div>\r\n                <button>\r\n                    Login\r\n                </button>\r\n            </div>\r\n        </form>\r\n    )\r\n})\r\nexport const LoginReduxForm = reduxForm<FormDataType>({form: 'login'})(LoginForm)\r\n\r\nconst Login = React.memo(() => {\r\n    const isAuth = useSelector<AppStateType,boolean>(state => state.auth.data.isAuth)\r\n    const dispatch = useDispatch()\r\n    const onSubmit = (formData: FormDataType) => {\r\n        dispatch(AuthLogin(formData.login, formData.password, formData.rememberMe,formData.captcha))\r\n    }\r\n    if (isAuth) {\r\n        return <Redirect to={'/profile'}/>\r\n    }\r\n    return (\r\n        <div>\r\n            <h1> Login </h1>\r\n            <LoginReduxForm onSubmit={onSubmit}/>\r\n        </div>\r\n\r\n    )\r\n})\r\n\r\n\r\nexport default Login"],"sourceRoot":""}